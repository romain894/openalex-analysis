<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenAlex Analysis: OpenAlex Analysis</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenAlex Analysis
   </div>
   <div id="projectbrief">OpenAlex Analysis is a python library to analyse articles, institutions, and others entities from the OpenAlex API.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OpenAlex Analysis </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> Scientific literature analysis using the OpenAlex API.</p>
<p>This repo provides classes and methods to extract statistics, plots and graphs, as well as examples in Jupyter Notebooks.</p>
<p>Install with: </p><div class="fragment"><div class="line">pip install openalex-analysis</div>
</div><!-- fragment --><p>A web app based on the library is available <a href="https://github.com/romain894/webapp-openalex-analysis">here</a>.</p>
<p>Documentation : <a href="https://romain894.github.io/openalex-analysis">https://romain894.github.io/openalex-analysis</a></p>
<p><a href="https://docs.openalex.org/">OpenAlex documentation</a> <a href="https://explore.openalex.org/">Explore OpenAlex in a GUI</a></p>
<p>Licence: GPL V3</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Examples</h1>
<p>More examples can be found in the notebooks <a href="https://github.com/romain894/openalex-analysis/blob/main/Works_examples.ipynb">Works_examples.ipynb</a> and <a href="https://github.com/romain894/openalex-analysis/blob/main/Concepts_works_analysis.ipynb">Concepts_Works_analysis.ipynb</a></p>
<h2><a class="anchor" id="autotoc_md3"></a>
Basic</h2>
<p>In the example, we create a dataset with the works about sustainability.</p>
<p>This dataset can be used as it, it is stored in a parquet file (more optimized than CSV) on the computer and can be simply imported as a dataframe with Pandas.</p>
<p>After getting this dataset, we continue by extracting the most cited articles by the dataset. For that, we extract all the references of the articles present in the dataset and rank these references.</p>
<div class="fragment"><div class="line">from openalex_analysis.plot import WorksPlot</div>
<div class="line"> </div>
<div class="line">concept_sustainability_id = &#39;C66204764&#39;</div>
<div class="line"> </div>
<div class="line"># get the works about sustainability</div>
<div class="line">wplt = WorksPlot(concept_sustainability_id)</div>
<div class="line"> </div>
<div class="line">print(&quot;\nFirst entities in the dataset:&quot;)</div>
<div class="line">print(wplt.entities_df[[&#39;id&#39;, &#39;title&#39;]].head(3))</div>
<div class="line"> </div>
<div class="line"># compute the most cited works by the dataset previously downloaded</div>
<div class="line">wplt.create_element_used_count_array(&#39;reference&#39;)</div>
<div class="line"> </div>
<div class="line">print(&quot;\nMost cited work within the dataset:&quot;)</div>
<div class="line">print(wplt.element_count_df.head(3))</div>
</div><!-- fragment --><div class="fragment"><div class="line">Loading dataframe of works of the concept C66204764</div>
<div class="line">Loading the list of entities from a parquet file...</div>
<div class="line"> </div>
<div class="line">First entities in the dataset:</div>
<div class="line">                                 id                                              title</div>
<div class="line">0  https://openalex.org/W2101946146  Asset Stock Accumulation and Sustainability of...</div>
<div class="line">1  https://openalex.org/W1999167944  Planetary boundaries: Guiding human developmen...</div>
<div class="line">2  https://openalex.org/W2122266551  Agricultural sustainability and intensive prod... </div>
<div class="line"> </div>
<div class="line">Getting name of C66204764 from the OpenAlex API (cache disabled)...</div>
<div class="line">Creating the works references count of works C66204764...</div>
<div class="line"> </div>
<div class="line">Most cited work within the dataset:</div>
<div class="line">                                  C66204764 Sustainability</div>
<div class="line">element                                                   </div>
<div class="line">https://openalex.org/W2026816730                       262</div>
<div class="line">https://openalex.org/W2096885696                       249</div>
<div class="line">https://openalex.org/W2103847341                       203</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Concepts yearly count</h2>
<p>In this example, we will create two datasets: one with the articles about sustainability of the SRC (Stockholm Resilience Centre) and one with the articles about sustainability of the UTT (University of Technology of Troyes).</p>
<p>We will then plot the yearly usage of the concept sustainability by these institutions (in this case it's equal to the number of articles in the dataset, as the dataset contains only the articles about sustainability).</p>
<p>We could also plot the yearly usage of other concepts or of the references by changing the parameters of the functions <code>create_element_used_count_array()</code> and <code>get_figure_time_series_element_used_by_entities()</code>.</p>
<div class="fragment"><div class="line">from openalex_analysis.plot import InstitutionsPlot, WorksPlot</div>
<div class="line"> </div>
<div class="line">concept_sustainability_id = &#39;C66204764&#39;</div>
<div class="line"># create the filter for the API to get only the articles about sustainability</div>
<div class="line">sustainability_concept_filter = {&quot;concepts&quot;: {&quot;id&quot;: concept_sustainability_id}}</div>
<div class="line"> </div>
<div class="line"># set the years we want to count</div>
<div class="line">count_years = list(range(2004, 2024))</div>
<div class="line"> </div>
<div class="line">institution_ids_list = [&quot;I138595864&quot;, &quot;I140494188&quot;]</div>
<div class="line">institution_names_list = [&quot;Stockholm Resilience Centre&quot;, &quot;University of Technology of Troyes&quot;]</div>
<div class="line"> </div>
<div class="line"># create a list of dictionaries with each dictionary containing the ID, name and filter for each institution</div>
<div class="line">entities_ref_to_count = [None] * len(institution_ids_list)</div>
<div class="line">for i in range(len(institution_ids_list)):</div>
<div class="line">    entities_ref_to_count[i] = {&#39;entitie_from_id&#39;: institution_ids_list[i],</div>
<div class="line">                                &#39;extra_filters&#39;: sustainability_concept_filter,</div>
<div class="line">                                &#39;entitie_name&#39;: institution_names_list[i]}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">wplt = WorksPlot()</div>
<div class="line">wplt.create_element_used_count_array(&#39;concept&#39;, entities_ref_to_count, count_years = count_years)</div>
<div class="line"> </div>
<div class="line">wplt.add_statistics_to_element_count_array(sort_by = &#39;sum_all_entities&#39;, min_concept_level = 2)</div>
<div class="line"> </div>
<div class="line">wplt.get_figure_time_series_element_used_by_entities().write_image(&quot;Plot_yearly_usage_sustainability_SRC_UTT.svg&quot;, width=1200)</div>
<div class="line"> </div>
<div class="line">wplt.get_figure_time_series_element_used_by_entities()</div>
</div><!-- fragment --><p><img src="https://raw.githubusercontent.com/romain894/openalex-analysis/main/Plot_yearly_usage_sustainability_SRC_UTT.svg" alt="Plot of the yearly usage of sustainability by SRC and UTT" style="pointer-events: none;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Configure the library</h1>
<p>By default, the library will run out of the box. Nevertheless, some optional configurations can be done to improve the performance and to fit best the use case.</p>
<p>Setting up the email address allows you to use the polite pool from OpenAlex which is faster than the default one.</p>
<div class="fragment"><div class="line">from openalex_analysis.plot import config, InstitutionsPlot</div>
<div class="line"> </div>
<div class="line">config.email = &quot;email@example.com&quot;</div>
<div class="line"> </div>
<div class="line">InstitutionsPlot()</div>
</div><!-- fragment --><p>The notebook <a href="https://github.com/romain894/openalex-analysis/blob/main/Setup_example.ipynb">Setup_example.ipynb</a> contains more setup examples.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Default settings</h2>
<div class="fragment"><div class="line">config.email = None</div>
<div class="line">config.api_key = None</div>
<div class="line">config.openalex_url = &quot;https://api.openalex.org&quot;</div>
<div class="line">config.allow_automatic_download = True</div>
<div class="line">config.disable_tqdm_loading_bar = False</div>
<div class="line">config.n_max_entities = 10000</div>
<div class="line">config.project_datas_folder_path = &quot;data&quot;·</div>
<div class="line">config.parquet_compression = &quot;brotli&quot;</div>
<div class="line">config.max_storage_percent = 95</div>
<div class="line">config.redis_enabled = False</div>
<div class="line"># Uncomment the following lines if you want to use Redis cache</div>
<div class="line"># config.redis_client = StrictRedis(host=os.environ.get(&#39;DOCKER_REDIS_URL&#39;, &quot;localhost&quot;),</div>
<div class="line">#                                  decode_responses=True,</div>
<div class="line">#                                  port=6379,</div>
<div class="line">#                                  db=2,)</div>
<div class="line"># config.redis_cache = RedisCache(redis_client=config_redis_client)</div>
<div class="line"># Don&#39;t forget to add the following two lines with all the imports</div>
<div class="line"># from redis import StrictRedis</div>
<div class="line"># from redis_cache import RedisCache</div>
</div><!-- fragment --><ul>
<li><code>email</code> The email address is need to access the polite pool from OpenAlex which is faster than the default one.</li>
<li><code>api_key</code> Optional, if you have one from OpenAlex</li>
<li><code>openalex_url</code> OpenAlex URL</li>
<li><code>allow_automatic_download</code> Allow the library to download dataset from OpenAlex if not already present on the disk</li>
<li><code>disable_tqdm_loading_bar</code> If set to True, it will disable the loading bar in the terminal output when downloading data from the OpenAlex API.</li>
<li><code>n_max_entities</code> When downloading a list of entities from the API (eg a list of works), the maximum number of entities to download. Set to None to have no limitation. This number must be a multiple of 200 (the is the number of element per page used by the library)</li>
<li><code>project_datas_folder_path</code> Path to store the data downloaded from the API. The data will be stored as parquet files, with each file corresponding to one request.</li>
<li><code>parquet_compression</code> By default, the parquet files are compressed. The compression can be disabled by setting with parquet_compression = None. For other parquet compression algorithms, see the pandas documentation. Compressing reduces by 2 to 10 the file size while needing a negligeable time to compress or decompress. Disabling the compression is usefull if you want to read the parquet files with an external software.</li>
<li><code>max_storage_percent</code> Maximum storage usage percentage on the disk before starting to delete data stored in project_datas_folder_path. The parquet file with the oldest last read data will be deleted first.</li>
<li><code>redis_enabled</code> Whenever Redis cache is enabled or not</li>
<li><code>redis_client</code> The Redis client configuration. Don't forget to add <code>from redis import StrictRedis</code> where the configuration is defined.</li>
<li><code>redis_cache</code> The Redis cache configuration. Don't forget to add <code>from redis_cache import RedisCache</code> where the configuration is defined.</li>
</ul>
<p>Romain Thomas 2023 </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
